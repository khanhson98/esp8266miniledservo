<html>
    <head>
        <title>Client</title>
    </head>
    <body>
        <img src="">
        <script>
            const img = document.querySelector('img');
            const WS_URL = "wss://khanhsonesp32cam.herokuapp.com";
            const ws = new WebSocket(WS_URL);
            let urlObject;
            //ws.onopen = () => console.log(`Connected to ${WS_URL}`);
            ws.onmessage = message => {
                const arrayBuffer = message.data;
                if(urlObject){
                    URL.revokeObjectURL(urlObject);
                }
                urlObject = URL.createObjectURL(new Blob([arrayBuffer]));
                img.src = urlObject;
            }

            //function noop() {}

            //const ping = function(){
             //   ws.ping(noop)
           // }
            //setInterval(ping, 20000);
           // setInterval(ws.ping(), 20000);
            //ws.onclose = function(){
        //setTimeout(setupWebSocket, 1000);
        </script>
    </body>
</html>